<p>
  <b>graph:</b>
  <div class="graph">
	<div id="placeholder" style="width:100%;height:300px"></div>
  </div>
</p>
<script type="text/javascript">
  // $.plot($("#placeholder"), [ [[0, 0], [1, 1]] ], { yaxis: { max: 1 } });
  var rankData = <%= raw @rankData.to_json %>;
  var graphOptions = <%= raw @graphOptions.to_json %>;
  $.plot($("#placeholder"), [rankData], graphOptions);

  function showTooltip(x, y, contents) {
      $('<div id="tooltip">' + contents + '</div>').css( {
          position: 'absolute',
          display: 'none',
          top: y + 5,
          left: x + 5,
          border: '1px solid #fdd',
          padding: '2px',
          'background-color': '#fee',
          opacity: 0.80
      }).appendTo("body").fadeIn(200);
  }

  var previousPoint = null;
  $("#placeholder").bind("plothover", function (event, pos, item) {
      $("#x").text(pos.x.toFixed(2));
      $("#y").text(pos.y.toFixed(2));

      if (item) {
          if (previousPoint != item.dataIndex) {
              previousPoint = item.dataIndex;
              
              $("#tooltip").remove();
              var x = item.datapoint[0].toFixed(2),
                  y = item.datapoint[1].toFixed(2);
              
              showTooltip(item.pageX, item.pageY, $.plot.formatDate(new Date(item.datapoint[0]), "%y/%m/%d", null) + " - " + item.datapoint[1] + "ìœ„");
          }
      }
      else {
          $("#tooltip").remove();
          previousPoint = null;            
      }

  });
</script>

<!-- Scaffolding generated by Casein v.3.1.7 -->

<h2>View app</h2>

<%= form_for @app, :url => casein_app_path(@app) do |f| %>

	<%= render :partial => 'casein/apps/form', :locals => { :f => f } %>
	
	<p class="submits">
	  <%= link_to 'Cancel', casein_apps_path, :class => 'cancel' %> or
		<%= f.submit "Save changes", :class => "update" %>
	</p>

<% end %>

<%= content_for :sidebar do %>
	<li><%= link_to "#{casein_show_icon "table"}Back to list".html_safe, casein_apps_path %></li>
<% end %>